name: metaspliceai
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.10
  # Core Scientific Computing
  - numpy=1.26.4
  - scipy=1.11.4  # scipy 1.13+ has issues on M1 Macs with numpy 1.26
  - pandas=2.1.4  # pandas 2.3+ has incompatibilities with numpy 1.26 on M1 Macs
  - pyarrow=18.*  # pyarrow 21+ has incompatibilities with pandas 2.1
  - polars=1.17.*  # Data processing (memory-efficient alternative to pandas)
  - matplotlib-base>=3.8
  # Machine Learning Frameworks
  - scikit-learn=1.5.*
  - xgboost=1.7.*
  - lightgbm=4.*
  - catboost=1.2.*
  - statsmodels=0.14.*  # Statistical analysis (required for feature importance)
  # Deep Learning Frameworks
  - pytorch>=2.0  # Required for OpenSpliceAI and future meta-models
  - torchvision  # PyTorch vision utilities
  # Visualization
  - plotly>=6.0
  - graphviz>=12.0
  - pip:
      - argcomplete==3.5.2
      - argh==0.31.3
      - python-dotenv>=1.0.0
      - biopython==1.85
      - pyyaml==6.0.3
      - gffutils==0.13
      - h5py==3.11.0  # CRITICAL: 3.12+ breaks SpliceAI model loading
      - ml-dtypes==0.2.0  # Compatible with TensorFlow 2.15
      - optree==0.13.1
      - protobuf==3.20.3  # TensorFlow 2.15 requires protobuf<4.24
      - psutil>=5.9.0
      - pybedtools==0.10.0
      - pyBigWig>=0.3.18
      - pyspark>=3.5.0
      - pyfaidx==0.8.1.3
      - pyparsing==3.2.0
      - requests==2.32.3
      - rich==13.9.4
      - seaborn>=0.12.0
      - shap>=0.45.0
      - simplejson==3.19.3
      - six==1.17.0
      - spliceai==1.3.1
      - tabulate==0.9.0
      - tensorboard==2.15.2  # Must match TensorFlow version
      - tensorflow==2.15.0  # CRITICAL: TF 2.15 includes Keras 2.15 (required for SpliceAI)
      - tensorflow-macos==2.15.0  # For M1/M2 Macs
      - tqdm==4.67.1
